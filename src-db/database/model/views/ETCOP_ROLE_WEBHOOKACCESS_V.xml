<?xml version="1.0"?>
  <database name="VIEW ETCOP_ROLE_WEBHOOKACCESS_V">
    <view name="ETCOP_ROLE_WEBHOOKACCESS_V"><![CDATA[SELECT get_uuid() AS etcop_role_webhookaccess_v_id, '0' AS ad_client_id, '0' AS ad_org_id, 'Y' AS isactive, now() AS created, '0' AS createdby, now() AS updated, '0' AS updatedby, rapp.ad_role_id, ad_column_identifier_std('ad_role', rapp.ad_role_id) AS role_name, rapp.etcop_app_id, ad_column_identifier_std('etcop_app', rapp.etcop_app_id) AS app_name, webhook.smfwhe_definedwebhook_id, ad_column_identifier_std('smfwhe_definedwebhook', webhook.smfwhe_definedwebhook_id) AS webhook_name, CASE WHEN (EXISTS (SELECT 1 FROM smfwhe_definedwebhook_role wr WHERE wr.ad_role_id = rapp.ad_role_id AND wr.smfwhe_definedwebhook_id = webhook.smfwhe_definedwebhook_id)) THEN 'Y' ELSE 'N' END AS has_role_webhook FROM etcop_role_app rapp JOIN etcop_app app ON app.etcop_app_id = rapp.etcop_app_id OR (EXISTS (SELECT 1 FROM etcop_team_member tm WHERE tm.etcop_app_id = rapp.etcop_app_id AND app.etcop_app_id = tm.app_member)) JOIN etcop_app_source asou ON asou.etcop_app_id = app.etcop_app_id JOIN etcop_file fil ON fil.etcop_file_id = asou.etcop_file_id JOIN etapi_openapi_flow flow ON flow.etapi_openapi_flow_id = fil.etapi_openapi_flow_id JOIN etapi_openapi_flowpoint fp ON fp.etapi_openapi_flow_id = flow.etapi_openapi_flow_id JOIN etapi_openapi_req req ON req.etapi_openapi_req_id = fp.etapi_openapi_req_id JOIN smfwhe_openapi_webhk opwhk ON opwhk.etapi_openapi_req_id = req.etapi_openapi_req_id JOIN smfwhe_definedwebhook webhook ON webhook.smfwhe_definedwebhook_id = opwhk.smfwhe_definedwebhook_id UNION SELECT get_uuid() AS etcop_role_webhookaccess_v_id, '0' AS ad_client_id, '0' AS ad_org_id, 'Y' AS isactive, now() AS created, '0' AS createdby, now() AS updated, '0' AS updatedby, rapp.ad_role_id, ad_column_identifier_std('ad_role', rapp.ad_role_id) AS role_name, rapp.etcop_app_id, ad_column_identifier_std('etcop_app', rapp.etcop_app_id) AS app_name, webhook.smfwhe_definedwebhook_id, ad_column_identifier_std('smfwhe_definedwebhook', webhook.smfwhe_definedwebhook_id) AS webhook_name, CASE WHEN (EXISTS (SELECT 1 FROM smfwhe_definedwebhook_role wr WHERE wr.ad_role_id = rapp.ad_role_id AND wr.smfwhe_definedwebhook_id = webhook.smfwhe_definedwebhook_id)) THEN 'Y' ELSE 'N' END AS has_role_webhook FROM etcop_role_app rapp JOIN etcop_app app ON app.etcop_app_id = rapp.etcop_app_id OR (EXISTS (SELECT 1 FROM etcop_team_member tm WHERE tm.etcop_app_id = rapp.etcop_app_id AND app.etcop_app_id = tm.app_member)) JOIN etcop_app_tool aptl ON aptl.etcop_app_id = app.etcop_app_id JOIN etcop_tool tool ON tool.etcop_tool_id = aptl.etcop_tool_id JOIN etcop_tool_wbhk twbhk ON twbhk.etcop_tool_id = tool.etcop_tool_id JOIN smfwhe_definedwebhook webhook ON webhook.smfwhe_definedwebhook_id = twbhk.smfwhe_definedwebhook_id]]></view>
  </database>
